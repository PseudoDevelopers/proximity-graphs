<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proximity Graphs with Gravity</title>

    <link rel="stylesheet" href="assets/styles/index.min.css">

    <script src="assets/scripts/accessories.js"></script>

    <script defer src="assets/scripts/vector.js"></script>
    <script defer src="assets/scripts/functions.js"></script>
    <script defer src="assets/scripts/node.js"></script>
    <script defer src="assets/scripts/canvas-drawing-functions.js"></script>
    <script defer src="assets/scripts/script.js"></script>
</head>

<body>
    <!-- Canvas -->
    <canvas id="canvas"></canvas>

    <script>
        let noOfNodes = 100

        const canvas = document.getElementById('canvas')
        let width, height
        document.body.onresize = resizeCanvas
        resizeCanvas()

        function resizeCanvas() {
            width = canvas.width = document.body.offsetWidth
            height = canvas.height = document.body.offsetHeight
        }

        let lines = true
        let gravity = true
    </script>

    <!-- Controls Panel -->
    <section id="controls-panel" minimized="true">
    <script>
        setTimeout(() => CONTROL_PANEL.show(), 2000)
    </script>

    <div class="icons">
        <span class="minimize" title="Minimize" onclick="CONTROL_PANEL.hide()">&#128469;&#xFE0E;</span>     <!-- Minimize -->
        <span class="maximize" title="Maximize" onclick="CONTROL_PANEL.show()">&#128470;&#xFE0E;</span>     <!-- Maximize -->
    </div>

    <script>
        const CONTROL_PANEL = {
            elem: document.getElementById('controls-panel'),
            isShow()/****/ { return this.elem.getAttribute('minimized') === 'false'/**/ },
            isHidden()/**/ { return this.elem.getAttribute('minimized') === 'true'/***/ },
            show()/******/ { this.elem.setAttribute('minimized', 'false')/**/ },
            hide()/******/ { this.elem.setAttribute('minimized', 'true')/***/ },
            toggle() {
                if (this.isShow()) this.hide()
                else/************/ this.show()
            }
        }

        document.addEventListener('keydown', e => {
            if (e.keyCode === 27)
                CONTROL_PANEL.toggle()
        })
    </script>

    <div id="controls">
        <!-- Nodes -->
        <section id="nodes">
    <div class="container">
        <div class="btns-and-number-container">
            <div class="btns">
                <button class="btn-round" title="Add one">&#x2b;</button>
                <button class="btn-round" title="Remove one">&#8722;</button>
            </div>
            <span id="no-of-nodes"></span>
        </div>
        <span>Nodes</span>
    </div>

    <script>
        const NO_OF_NODES_ELEM = document.getElementById('no-of-nodes')
        updateNoOfNodes()
        function updateNoOfNodes() {
            NO_OF_NODES_ELEM.innerText = noOfNodes
        }
    </script>


    <!-- Media Buttons -->
    <div id="media-btns">
        <span title="Previous Frame" onclick="prevFrame()">&#x23EE;</span>
        <div class="play-pause" id="play-pause" paused="false">
            <span id="play" title="Play" onclick="play()">&#x23F5;</span>
            <span id="pause" title="Pause" onclick="pause()">&#x23F8;</span>
        </div>
        <span title="Next Frame" onclick="nextFrame()">&#x23ED;</span>
    </div>

    <script>
        let paused = false
        const PLAY_PAUSE_ELEM = document.getElementById('play-pause')

        document.addEventListener('keydown', e => {
            if/***/ (e.keyCode === 32) togglePlayPause()    // Space
            else if (e.keyCode === 37) prevFrame()          // Left Key
            else if (e.keyCode === 39) nextFrame()          // Right Key
        })
    </script>

    <!-- Play Pause -->
    <script>
        function togglePlayPause() {
            if (paused) play()
            else/*****/ pause()
        }
        function play() {
            if (!paused) return

            paused = false
            PLAY_PAUSE_ELEM.setAttribute('paused', 'false')
            startAnimation()
        }
        function pause() {
            if (paused) return

            paused = true
            PLAY_PAUSE_ELEM.setAttribute('paused', 'true')
            stopAnimation()
        }
    </script>

    <!-- Next & Prev Frames -->
    <script>
        function nextFrame() {
            pause()
            playNextFrame()
        }
        function prevFrame() {
            pause()
            playPrevFrame()
        }
    </script>
</section>


        <!-- Nodes Nature -->
        <section class="radio-btns" id="nodes-nature">
    <div>
        <input type="radio" name="nodes-nature" id="transparent-nodes" checked>
        <label for="transparent-nodes">Transparent</label>
    </div>
    <div>
        <input type="radio" name="nodes-nature" id="solid-nodes">
        <label for="solid-nodes">Collide</label>
    </div>
</section>


        <!-- Edges -->
        <section class="radio-btns" id="edge">
    <div>
        <input type="radio" name="edge" id="edge-bounce" checked>
        <label for="edge-bounce">Bounce</label>
    </div>

    <div>
        <input type="radio" name="edge" id="torus">
        <label for="torus">Torus</label>
    </div>

    <div>
        <input type="radio" name="edge" id="edge-none">
        <label for="edge-none">None</label>
    </div>
</section>


        <!-- Other Options -->
        <div class="chk-boxs">
    <div>
        <input type="checkbox" id="gravity" onchange="gravity=this.checked" checked>
        <label for="gravity">Gravity</label>
    </div>

    <div>
        <input type="checkbox" id="lines" onchange="lines=this.checked" checked>
        <label for="lines">Connections</label>
    </div>
</div>

    </div>
</section>

</body>

</html>
